<div class="sign-in-box">
  <div class="mail-bg"></div>
  <div class="form-box">
    <mat-stepper linear #stepper labelPosition="bottom" class="stepper-box">
      <!-- Step 1   -->
      <mat-step [stepControl]="emailForm" [editable]="isEditable">
        <h1>Let's get to know you.</h1>
        <form [formGroup]="emailForm" (submit)="emailHandler()">
          <div class="input-box">
            <p>Email</p>
            <mat-form-field class="form-field-box">
              <input
                type="email"
                matInput
                formControlName="email"
                placeholder="abc@example.com"
              />
            </mat-form-field>
            <mat-error
              class="error"
              *ngIf="
                emailForm.get('email')?.touched &&
                (emailForm.get('email')?.hasError('email') ||
                  emailForm.get('email')?.hasError('required'))
              "
              >Enter a valid email</mat-error
            >
          </div>
          <button mat-raised-button class="nxt-btn" type="submit">
            <div>Sign Up</div>
            <mat-icon class="icon">east</mat-icon>
          </button>
        </form>
      </mat-step>

      <!-- Step 2   -->
      <mat-step [stepControl]="otpForm" [editable]="isEditable">
        <h1 class="move-down">Verify your phone number.</h1>
        <p class="center-p">
          We've sent a code to the phone number associated with your email ({{
            emailForm.get("email")?.value
          }}).
        </p>
        <app-otp-form (formGroupEmitter)="otpForm = $event"></app-otp-form>
      </mat-step>

      <!-- Step 3-->
      <mat-step [stepControl]="passwordForm" [editable]="isEditable">
        <h1 class="move-down">Create your new password!</h1>
        <p class="center-p">
          Create your radical username, remember it has to be special.
        </p>
        <form [formGroup]="passwordForm" (submit)="passwordFormHandler()">
          <div class="input-box">
            <p>Password</p>
            <mat-form-field class="form-field-box">
              <mat-label
                *ngIf="
                  passwordForm.get('password')?.hasError('required') ||
                  passwordForm.get('password')?.hasError('minlength') ||
                  passwordForm.get('password')?.hasError('whitespace')
                "
                >Enter your pasword
              </mat-label>
              <input
                matInput
                [type]="hide ? 'password' : 'text'"
                formControlName="password"
                placeholder="must be 8 characters or more"
                (blur)="onPasswordInput()"
              />
              <button
                mat-icon-button
                matSuffix
                (click)="hide = !hide"
                [attr.aria-label]="'Hide password'"
                [attr.aria-pressed]="hide"
                type="button"
              >
                <mat-icon>{{
                  hide ? "visibility_off" : "visibility"
                }}</mat-icon>
              </button>
            </mat-form-field>
          </div>
          <button mat-raised-button class="nxt-btn" type="submit">
            <div>Sign Up</div>
            <mat-icon class="icon">east</mat-icon>
          </button>
        </form>
      </mat-step>

      <!-- Step 4-->
      <mat-step>
        <div class="greetings">
          <h1>ðŸ‘‹Welcome again!</h1>
          <p>Connecting You Instantly, Delivering with Precision</p>
          <button class="expore-btn" mat-button mat-raised-button>
            Explore
          </button>
        </div>
      </mat-step>
    </mat-stepper>

    <button
      mat-raised-button
      color="basic"
      (click)="goBack()"
      *ngIf="stepper.selectedIndex === 1"
      class="prev-btn"
    >
      Back
      <mat-icon class="icon">navigate_before</mat-icon>
    </button>
    <button
      mat-raised-button
      color="basic"
      *ngIf="stepper.selectedIndex === 0"
      class="prev-btn"
      routerLink="/auth/login"
    >
      Sign In
      <mat-icon class="icon">navigate_before</mat-icon>
    </button>
  </div>
</div>
